

<p>From Android Nouget, Google adds support for displaying more than one app at the same time. The first feature they add is</p> <blockquote>  <strong>Split-Screen Mode</strong> </blockquote> <p>Split-screen mode enables two apps can run side-by-side or one-above-the-other. Such as this</p> <div class=\"slate-resizable-image-embed slate-image-embed__resize-middle\">  <img data-media-urn=\"urn:li:digitalmediaAsset:C5612AQEbFuvq6F41kg\" data-li-src=\"https://media.licdn.com/dms/image/C5612AQEbFuvq6F41kg/article-inline_image-shrink_1500_2232/0?e=2120360400&v=alpha&t=Ml7pF5kExTKxZhC16AJ-M2bCvFbXNeTF16QFQhhHH7U\" src=\"//:0\"> </div> <p><br></p> <h3>Enable/Disable feature</h3> <p>The application could enable/disable split-screen support in AndroidManifest.xml. Target API higher than 24 and put below configuration in AndroidManifest.xml</p> <pre spellcheck=\"false\">android:resizeableActivity=<span class=\"hljs-string\">\"true|false\"</span></pre> <h3>Enter Split-Screen by User</h3> <p>The user can switch into multi-window mode in the following ways:</p> <pre spellcheck=\"false\">If the user opens the Overview screen <span class=\"hljs-keyword\">and</span> performs a long press <span class=\"hljs-literal\">on</span> an activity title, they can drag that activity to a highlighted portion <span class=\"hljs-keyword\">of</span> the screen to put the activity <span class=\"hljs-keyword\">in</span> multi-<span class=\"hljs-built_in\">window</span> mode.If the user performs a long press <span class=\"hljs-literal\">on</span> the Overview button, the device puts the current activity <span class=\"hljs-keyword\">in</span> multi-<span class=\"hljs-built_in\">window</span> mode <span class=\"hljs-keyword\">and</span> opens the Overview screen to let the user choose another activity to share the screen.</pre> <p>In another word, Split-mode is passive mode regards to the application because the application could not enter this mode proactively. It will be triggered by user interaction and managed by the system. Even there is some flag could be set when starting new Activity, it does not convert current activity into the multi-window mode.</p> <h3>Exit Split-Screen by User</h3> <pre spellcheck=\"false\">If user pull down <span class=\"hljs-keyword\">or</span> pull up the divider between <span class=\"hljs-number\">2</span> activitys, it willonly display one activity <span class=\"hljs-keyword\">in</span> whoel screen.</pre> <h3>Enter Split-Screen by Application</h3> <p>As we mentioned, the application has no option to enter split-screen proactivity</p> <h3>Exit Split-Screen by Application</h3> <p>As we mentioned, the application has no option to exit split-screen proactivity</p> <blockquote>  <strong>Picture-in-Picture Mode</strong> </blockquote> <p>Starting with Android 8.0, apps can put themselves in <a href=\"https://developer.android.com/guide/topics/ui/picture-in-picture.html\" target=\"_blank\" rel=\"nofollow noopener\">picture-in-picture mode</a>, allowing them to continue showing content while the user browses or interacts with other apps.</p> <div class=\"slate-resizable-image-embed slate-image-embed__resize-middle\">  <img data-media-urn=\"urn:li:digitalmediaAsset:C5612AQFk2yW-Zrfg6w\" data-li-src=\"https://media.licdn.com/dms/image/C5612AQFk2yW-Zrfg6w/article-inline_image-shrink_1500_2232/0?e=2120360400&v=alpha&t=escp5J_ICDuTUR_uIy6EvHBnlOI9P0vhjqkE6vY5NSo\" src=\"//:0\"> </div> <p><br></p> <h3>Enable/Disable feature</h3> <p>The application could enable/disable picture-in-picture support in AndroidManifest.xml. Target API higher than 26 and put below configuration in AndroidManifest.xml</p> <pre spellcheck=\"false\">android:supportsPictureInPicture =<span class=\"hljs-string\">\"true|false\"</span></pre> <h3>Enter Picture-in-Picture by User</h3> <p>Basically, the user has no way to force application into pip mode. Some applications such as Google Chrome will display in pip mode if the user clicks the home button, but it is designed for each application and not every app follow the same rules.</p> <h3>Exit Picture-in-Picture by User</h3> <p>The system will restore the activity if the user double-clicks the pip screen. App did not need any extra work but be careful the handling of the activity restart</p> <h3>Enter Picture-in-Picture by Application</h3> <p>Please set minsdk is 26 and above and put an activity in picture-in-picture mode, call below inside your code. This method has no effect if the device does not support picture-in-picture mode</p> <pre spellcheck=\"false\">Activity.enterPictureInPictureMode(PictureInPictureParams <span class=\"hljs-keyword\">params</span>)</pre> <p>PictureInPIctureParams define how activity displayed on the screen include its width, height..etc.</p> <p>One sample data would be looks like this</p> <pre spellcheck=\"false\">PictureInPictureParams.Builder mPictureInPictureParamsBuilder =        <span class=\"hljs-keyword\">new</span> PictureInPictureParams.Builder();<span class=\"hljs-comment\">// set size</span><span class=\"hljs-keyword\">int</span> width = <span class=\"hljs-number\">400</span>; <span class=\"hljs-comment\">// pixel size</span><span class=\"hljs-keyword\">int</span> height = <span class=\"hljs-number\">300</span>; <span class=\"hljs-comment\">// pixel size</span>Rational aspectRatio = <span class=\"hljs-keyword\">new</span> Rational(<span class=\"hljs-number\">400</span>, <span class=\"hljs-number\">300</span>);<span class=\"hljs-comment\">//set actions</span><span class=\"hljs-keyword\">final</span> ArrayList<RemoteAction> actions = <span class=\"hljs-keyword\">new</span> ArrayList<>();actions.add(        <span class=\"hljs-keyword\">new</span> RemoteAction(                Icon.createWithResource(MainActivity.<span class=\"hljs-keyword\">this</span>, R.drawable.ic_info_24dp),                getString(R.<span class=\"hljs-built_in\">string</span>.info),                getString(R.<span class=\"hljs-built_in\">string</span>.info_description),                PendingIntent.getActivity(                        MainActivity.<span class=\"hljs-keyword\">this</span>,                        REQUEST_INFO,                        <span class=\"hljs-keyword\">new</span> Intent(                                Intent.ACTION_VIEW,                                Uri.parse(getString(R.<span class=\"hljs-built_in\">string</span>.info_uri))),                        <span class=\"hljs-number\">0</span>)));<span class=\"hljs-comment\">//build</span>mPictureInPictureParamsBuilder.setAspectRatio(aspectRatio).setActions(actions).build();<span class=\"hljs-comment\">//change to pip mode</span>enterPictureInPictureMode(mPictureInPictureParamsBuilder.build());</pre> <p>If the activity does not have this function, please check if your dependency in the build.gradle if it is version beyond 27.0.0</p> <h3>Exit Picture-in-Picture by Application</h3> <p>Apparently, there is no straightforward method the exit pip mode, the application could stop itself and restart activity in the normal way to achieve this.</p> <blockquote>  <strong>Free Form Mode</strong> </blockquote> <p><strong>Freeform</strong> allows users to dynamically resize the activity panes and have more than two apps visible on their screen.</p> <p>Basically, Free-Form feature needs to be enabled by the manufacturer while they compile and rebuild the Android system. If the native Android system resides on your device, this feature is available right now for any Android 7.0 device.</p> <div class=\"slate-resizable-image-embed slate-image-embed__resize-full-width\">  <img data-media-urn=\"urn:li:digitalmediaAsset:C5612AQGqxHgf5LERZA\" data-li-src=\"https://media.licdn.com/dms/image/C5612AQGqxHgf5LERZA/article-inline_image-shrink_1500_2232/0?e=2120360400&v=alpha&t=UndgPG3W0JRVsRIfSWNYNn7BK-hKG5BoRU-0IbxRYOI\" src=\"//:0\"> </div> <h3>Enable/Disable feature</h3> <p>There is no special flag to turn on or off this feature. If resized activity feature is true, then it should be turn on.</p> <pre spellcheck=\"false\">android:resizeableActivity=<span class=\"hljs-string\">\"true|false\"</span></pre> <p>In some old device, it might need to enable setting through adb</p> <pre spellcheck=\"false\">adb shell settings put global <span class=\"hljs-built_in\">enable</span>_freeform_support 1</pre> <h3>Enter Free-Form by User</h3> <p>Basically, the user has no way to force application into free-form mode unless the application is designed to do this way</p> <h3>Exit Free-Form by User</h3> <p>The user could click the monitor icon at the title bar of activity to restore activity display in full screen</p> <h3>Enter Free-Form by Application</h3> <p>Please set minsdk is 26 and above and launch the activity with AcivityOptions.</p> <pre spellcheck=\"false\"><span class=\"hljs-comment\">//Define the bounds in which the Activity will be launched into.</span>Rect bounds = <span class=\"hljs-keyword\">new</span> Rect(<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">0</span>,<span class=\"hljs-number\">300</span>,<span class=\"hljs-number\">300</span>);<span class=\"hljs-comment\">// Set the bounds as an activity option.</span>ActivityOptions options = ActivityOptions.makeBasic();options.setLaunchBounds(bounds);<span class=\"hljs-comment\">// Start the LaunchBoundsActivity with the specified options</span>Intent intent = <span class=\"hljs-keyword\">new</span> Intent(<span class=\"hljs-keyword\">this</span>, FreeFormActivity.<span class=\"hljs-keyword\">class</span>);intent.addFlags(        Intent.FLAG_ACTIVITY_MULTIPLE_TASK |        Intent.FLAG_ACTIVITY_NEW_TASK);startActivity(intent, options.toBundle());</pre> <h3>Exit Free-Form by Application</h3> <p>Apparently, there is no straightforward method the exit pip mode, the application could stop itself and restart activity in the normal way to achieve this.</p> <p>Thanks for your reading, below is sample code for my article. Let me know if you have any comments</p> <p><a href=\"https://github.com/alading/android_multiple_window_example.git\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/alading/android_multiple_window_example.git</a></p>